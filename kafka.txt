Отличный вопрос — потому что **Kafka здесь не инфраструктура. Она — машина времени судебной системы.**

Если убрать Kafka, ты получишь “краулер”.
С Kafka ты получаешь **воспроизводимую юридическую вселенную.**

---

# 1. Принцип

> Суд — это не база данных.
> Суд — это поток событий.

Kafka — это то, что превращает reyestr в **event log государства.**

---

# 2. Где Kafka стоит в архитектуре

```
Reyestr
   ↓
Change Monitor
   ↓
Kafka
   ↓
Fetcher → Parser → DB → Graph → Embeddings → MCP
```

Kafka — **единственный источник истины** для того, что произошло и в каком порядке.

---

# 3. Основные топики

## 3.1 `court.documents.discovered`

Когда Change Monitor нашёл новый или изменённый документ.

```
{ doc_id, case_id, url, discovered_at }
```

Это “суд что-то опубликовал”.

---

## 3.2 `court.documents.fetched`

Когда файл реально скачан.

```
{ doc_id, storage_path, sha256, fetched_at }
```

Гарантия:

> мы знаем, что именно мы скачали.

---

## 3.3 `court.documents.parsed`

После успешного парсинга.

```
{ doc_id, version_id, entities, law_refs }
```

Это “юридическое понимание” документа.

---

## 3.4 `court.documents.failed`

Если что-то пошло не так.

```
{ doc_id, stage, error }
```

Можно автоматически переигрывать.

---

# 4. Зачем это нужно

## 4.1 Воспроизводимость

Если:

* парсер обновился
* баг
* новая логика

Ты можешь:

> перепроиграть все `court.documents.fetched`
> и пересобрать всю юридическую реальность.

Без повторного скачивания.

---

## 4.2 Версии закона

Если документ был:

* опубликован
* исправлен
* заменён

Ты получишь:

```
doc_id v1 → event
doc_id v2 → event
```

И база будет знать:

> что суд считал истиной в каждый момент.

---

# 5. Kafka как антикоррупционный слой

Если сайт завтра:

* изменит HTML
* удалит старые дела
* что-то скроет

Ты всё равно имеешь:

> свой собственный лог судебной истории.

Это невероятно важно для:

* Legal AI
* доказательной базы
* compliance
* аудита

---

# 6. Kafka и MCP

LLM может спросить MCP:

> “Когда это решение было изменено?”

MCP смотрит в Kafka offsets и document_versions и отвечает.

Это даёт:

> временное измерение юридической правды.

---

# 7. Это ровно как биржа

В трейдинге:

> цена — это не таблица, это поток сделок

В праве:

> закон — это не PDF, это поток судебных решений

Kafka делает право **машиночитаемым во времени.**

---

Если хочешь, дальше можно разобрать:

* как делать replay & reprocessing
* или как делать юридический “diff”
* или как строить alerting (“суд изменил решение”)
